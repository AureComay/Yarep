<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yarep - Yalmil.com</title>
  <link rel="icon" href="https://cdn.discordapp.com/emojis/1416607460201857168.png?v=1" type="image/png">
  <meta property="og:title" content="Yalmil.com" />
  <meta property="og:description" content="Red social moderna donde puedes compartir publicaciones, im√°genes y mensajes con tus amigos" />
  <meta property="og:image" content="https://cdn.discordapp.com/attachments/1355008732576088204/1402309070014124102/Screenshot_20250804-221210.png?ex=68937197&is=68922017&hm=1fa6f462304b2b8cf8a0875053730f988d725d114fbf2648fcb87ee1b67b6a76&" />
  <meta property="og:url" content="https://yalmil.github.io/Yalmil.com/" />
  <meta property="og:type" content="website" />
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: .4s;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      width: 100%;
    }
    
    .login-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 80vh;
      animation: fadeIn 0.5s;
    }
    
    .login-box {
      padding: 40px;
      border-radius: 15px;
      text-align: center;
      max-width: 400px;
      width: 100%;
    }
    
    .login-box h2 {
      margin-bottom: 30px;
      font-size: 2em;
    }
    
    .google-btn {
      background: white;
      color: #333;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 auto;
      transition: transform 0.2s;
    }
    
    .google-btn:hover {
      transform: scale(1.05);
    }
    
    .app-container {
      display: none;
      animation: fadeIn 0.5s;
    }
    
    header {
      padding: 20px;
      border-bottom: 2px solid;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    header h1 {
      font-size: 1.8em;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }
    
    .logout-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
    }
    
    .main-content {
      display: grid;
      grid-template-columns: 250px 1fr 300px;
      gap: 20px;
      padding: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .sidebar {
      padding: 20px;
      border-radius: 10px;
      height: fit-content;
      position: sticky;
      top: 20px;
    }
    
    .sidebar h3 {
      margin-bottom: 15px;
    }
    
    .nav-item {
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
    }
    
    .nav-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .feed {
      animation: fadeIn 0.5s;
    }
    
    .post-composer {
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    
    .post-composer textarea {
      width: 100%;
      min-height: 100px;
      padding: 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      resize: vertical;
      margin-bottom: 10px;
    }
    
    .post-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      transition: 0.2s;
    }
    
    .btn-primary {
      background: #1da1f2;
      color: white;
    }
    
    .btn-primary:hover {
      background: #1a8cd8;
    }
    
    .image-input {
      display: none;
    }
    
    .image-btn {
      background: rgba(255, 255, 255, 0.1);
      color: inherit;
      border: 1px solid;
    }
    
    .image-preview {
      margin-top: 10px;
      max-width: 100%;
      border-radius: 8px;
    }
    
    .post {
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 15px;
      animation: fadeIn 0.5s;
    }
    
    .post-header {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .post-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
    }
    
    .post-info h4 {
      margin-bottom: 3px;
    }
    
    .post-time {
      font-size: 0.9em;
      opacity: 0.7;
    }
    
    .post-content {
      margin: 15px 0;
      line-height: 1.5;
    }
    
    .post-image {
      max-width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }
    
    .post-interactions {
      display: flex;
      gap: 20px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .interaction-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-family: 'Poppins', sans-serif;
      transition: 0.2s;
    }
    
    .interaction-btn:hover {
      opacity: 0.7;
    }
    
    .messages-panel {
      padding: 20px;
      border-radius: 10px;
      position: sticky;
      top: 20px;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .messages-panel h3 {
      margin-bottom: 15px;
    }
    
    .friend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 8px;
      transition: 0.2s;
    }
    
    .friend-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .friend-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
    }
    
    .chat-modal {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      height: 500px;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      z-index: 1000;
      flex-direction: column;
    }
    
    .chat-header {
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .close-chat {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.5em;
    }
    
    .chat-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
    }
    
    .message {
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      max-width: 80%;
      animation: fadeIn 0.3s;
    }
    
    .message.sent {
      background: #1da1f2;
      color: white;
      margin-left: auto;
    }
    
    .message.received {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .chat-input-container {
      padding: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      gap: 10px;
    }
    
    .chat-input {
      flex: 1;
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.05);
      font-family: 'Poppins', sans-serif;
    }
    
    .send-btn {
      background: #1da1f2;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
    }
    
    @media (max-width: 1024px) {
      .main-content {
        grid-template-columns: 1fr;
      }
      
      .sidebar, .messages-panel {
        display: none;
      }
    }
    
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #0a0a0a, #1a001f);
        color: #e5ccff;
      }
      
      header {
        background: #15001f;
        color: #c084fc;
        border-color: #c084fc;
      }
      
      header h1 {
        color: #c084fc;
      }
      
      .logout-btn, .nav-item, .interaction-btn {
        color: #e5ccff;
        border-color: #c084fc;
      }
      
      .post-composer, .post, .sidebar, .messages-panel, .login-box {
        background: rgba(40, 0, 60, 0.25);
        border: 2px solid #c084fc;
        color: #e5ccff;
      }
      
      .post-composer textarea, .chat-input {
        color: #e5ccff;
        border-color: #c084fc;
      }
      
      .chat-modal {
        background: rgba(40, 0, 60, 0.95);
        border: 2px solid #c084fc;
        color: #e5ccff;
      }
    }
    
    @media (prefers-color-scheme: light) {
      body {
        background: linear-gradient(135deg, #330a00, #662000);
        color: #ffd8a6;
      }
      
      header {
        background: #4d1a00;
        color: #ff8c00;
        border-color: #ff8c00;
      }
      
      header h1 {
        color: #ff8c00;
      }
      
      .logout-btn, .nav-item, .interaction-btn {
        color: #ffd8a6;
        border-color: #ff8c00;
      }
      
      .post-composer, .post, .sidebar, .messages-panel, .login-box {
        background: rgba(60, 20, 0, 0.2);
        border: 2px solid #ff8c00;
        color: #ffd8a6;
      }
      
      .post-composer textarea, .chat-input {
        color: #ffd8a6;
        border-color: #ff8c00;
      }
      
      .chat-modal {
        background: rgba(60, 20, 0, 0.95);
        border: 2px solid #ff8c00;
        color: #ffd8a6;
      }
    }
  </style>
</head>
<body>
  <!-- Login Screen -->
  <div class="login-container" id="loginContainer">
    <div class="login-box">
      <h2>Bienvenido a la Red Social</h2>
      <p style="margin-bottom: 30px;">Inicia sesi√≥n para conectarte con tus amigos</p>
      <button class="google-btn" id="googleSignIn">
        <svg width="24" height="24" viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Continuar con Google
      </button>
    </div>
  </div>

  <!-- Main App -->
  <div class="app-container" id="appContainer">
    <header>
      <h1>üê¶ Yarep</h1>
      <div class="user-info">
        <img id="userAvatar" class="user-avatar" alt="Avatar">
        <span id="userName"></span>
        <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
      </div>
    </header>

    <div class="main-content">
      <!-- Sidebar -->
      <aside class="sidebar">
        <h3>Navegaci√≥n</h3>
        <div class="nav-item">üè† Inicio</div>
        <div class="nav-item">üîî Notificaciones</div>
        <div class="nav-item">‚úâÔ∏è Mensajes</div>
        <div class="nav-item">üë§ Perfil</div>
      </aside>

      <!-- Feed -->
      <main class="feed">
        <div class="post-composer">
          <textarea id="postContent" placeholder="¬øQu√© est√° pasando?"></textarea>
          <div id="imagePreviewContainer"></div>
          <div class="post-actions">
            <button class="btn image-btn" id="imageBtn">üì∑ Imagen</button>
            <input type="file" id="imageInput" class="image-input" accept="image/*">
            <button class="btn btn-primary" id="publishBtn">Publicar</button>
          </div>
        </div>

        <div id="postsContainer"></div>
      </main>

      <!-- Messages Panel -->
      <aside class="messages-panel">
        <h3>Mensajes</h3>
        <div id="friendsList"></div>
      </aside>
    </div>
  </div>

  <!-- Chat Modal -->
  <div class="chat-modal" id="chatModal">
    <div class="chat-header">
      <div style="display: flex; align-items: center; gap: 10px;">
        <img id="chatAvatar" class="friend-avatar" alt="Avatar">
        <span id="chatName"></span>
      </div>
      <button class="close-chat" id="closeChat">‚úï</button>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chatInput" placeholder="Escribe un mensaje...">
      <button class="send-btn" id="sendBtn">Enviar</button>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getDatabase, ref, push, onValue, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
    import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyAVK1jVFsEvjzjQYLPp4nkGdRdMNJ9psPc",
  authDomain: "sepmc-2ab3d.firebaseapp.com",
  databaseURL: "https://sepmc-2ab3d-default-rtdb.firebaseio.com",
  projectId: "sepmc-2ab3d",
  storageBucket: "sepmc-2ab3d.firebasestorage.app",
  messagingSenderId: "1015746236260",
  appId: "1:1015746236260:web:90ec427553e29f8257b471",
  measurementId: "G-EXHH8NQNBF"
};

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);
    const storage = getStorage(app);
    const provider = new GoogleAuthProvider();

    let currentUser = null;
    let selectedImage = null;
    let currentChatUser = null;

    // Auth State
    onAuthStateChanged(auth, (user) => {
      if (user) {
        currentUser = user;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('appContainer').style.display = 'block';
        document.getElementById('userName').textContent = user.displayName;
        document.getElementById('userAvatar').src = user.photoURL;
        loadPosts();
        loadFriends();
      } else {
        document.getElementById('loginContainer').style.display = 'flex';
        document.getElementById('appContainer').style.display = 'none';
      }
    });

    // Google Sign In
    document.getElementById('googleSignIn').addEventListener('click', async () => {
      try {
        await signInWithPopup(auth, provider);
      } catch (error) {
        console.error('Error al iniciar sesi√≥n:', error);
        alert('Error al iniciar sesi√≥n');
      }
    });

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      signOut(auth);
    });

    // Image Upload
    document.getElementById('imageBtn').addEventListener('click', () => {
      document.getElementById('imageInput').click();
    });

    document.getElementById('imageInput').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        selectedImage = file;
        const reader = new FileReader();
        reader.onload = (e) => {
          document.getElementById('imagePreviewContainer').innerHTML = 
            `<img src="${e.target.result}" class="image-preview" style="max-height: 200px;">`;
        };
        reader.readAsDataURL(file);
      }
    });

    // Publish Post
    document.getElementById('publishBtn').addEventListener('click', async () => {
      const content = document.getElementById('postContent').value.trim();
      
      if (!content && !selectedImage) {
        alert('Escribe algo o selecciona una imagen');
        return;
      }

      try {
        let imageUrl = null;
        
        if (selectedImage) {
          const imageRef = storageRef(storage, `posts/${Date.now()}_${selectedImage.name}`);
          await uploadBytes(imageRef, selectedImage);
          imageUrl = await getDownloadURL(imageRef);
        }

        const postsRef = ref(db, 'posts');
        await push(postsRef, {
          content,
          imageUrl,
          userId: currentUser.uid,
          userName: currentUser.displayName,
          userPhoto: currentUser.photoURL,
          timestamp: serverTimestamp(),
          likes: 0
        });

        document.getElementById('postContent').value = '';
        document.getElementById('imagePreviewContainer').innerHTML = '';
        document.getElementById('imageInput').value = '';
        selectedImage = null;
      } catch (error) {
        console.error('Error al publicar:', error);
        alert('Error al publicar');
      }
    });

    // Load Posts
    function loadPosts() {
      const postsRef = ref(db, 'posts');
      onValue(postsRef, (snapshot) => {
        const posts = [];
        snapshot.forEach((child) => {
          posts.push({ id: child.key, ...child.val() });
        });
        
        posts.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
        
        const container = document.getElementById('postsContainer');
        container.innerHTML = posts.map(post => `
          <div class="post">
            <div class="post-header">
              <img src="${post.userPhoto}" class="post-avatar" alt="Avatar">
              <div class="post-info">
                <h4>${post.userName}</h4>
                <span class="post-time">${post.timestamp ? new Date(post.timestamp).toLocaleString() : 'Ahora'}</span>
              </div>
            </div>
            <div class="post-content">
              ${post.content || ''}
              ${post.imageUrl ? `<img src="${post.imageUrl}" class="post-image" alt="Post image">` : ''}
            </div>
            <div class="post-interactions">
              <button class="interaction-btn">‚ù§Ô∏è ${post.likes || 0}</button>
              <button class="interaction-btn">üí¨ Comentar</button>
              <button class="interaction-btn">üîÑ Compartir</button>
            </div>
          </div>
        `).join('');
      });
    }

    // Load Friends
    function loadFriends() {
      const usersRef = ref(db, 'users');
      onValue(usersRef, (snapshot) => {
        const friends = [];
        snapshot.forEach((child) => {
          const userData = child.val();
          if (child.key !== currentUser.uid) {
            friends.push({ id: child.key, ...userData });
          }
        });
        
        const container = document.getElementById('friendsList');
        container.innerHTML = friends.map(friend => `
          <div class="friend-item" data-uid="${friend.id}" data-name="${friend.displayName}" data-photo="${friend.photoURL}">
            <img src="${friend.photoURL}" class="friend-avatar" alt="Avatar">
            <span>${friend.displayName}</span>
          </div>
        `).join('');

        document.querySelectorAll('.friend-item').forEach(item => {
          item.addEventListener('click', () => {
            openChat(
              item.dataset.uid,
              item.dataset.name,
              item.dataset.photo
            );
          });
        });
      });

      // Save current user
      set(ref(db, `users/${currentUser.uid}`), {
        displayName: currentUser.displayName,
        photoURL: currentUser.photoURL,
        lastSeen: serverTimestamp()
      });
    }

    // Chat Functions
    function openChat(uid, name, photo) {
      currentChatUser = uid;
      document.getElementById('chatModal').style.display = 'flex';
      document.getElementById('chatName').textContent = name;
      document.getElementById('chatAvatar').src = photo;
      document.getElementById('chatMessages').innerHTML = '';
      loadMessages(uid);
    }

    document.getElementById('closeChat').addEventListener('click', () => {
      document.getElementById('chatModal').style.display = 'none';
      currentChatUser = null;
    });

    document.getElementById('sendBtn').addEventListener('click', sendMessage);
    document.getElementById('chatInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    async function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (!message || !currentChatUser) return;

      const chatId = [currentUser.uid, currentChatUser].sort().join('_');
      const messagesRef = ref(db, `chats/${chatId}`);
      
      await push(messagesRef, {
        text: message,
        senderId: currentUser.uid,
        timestamp: serverTimestamp()
      });

      input.value = '';
    }

    function loadMessages(uid) {
      const chatId = [currentUser.uid, uid].sort().join('_');
      const messagesRef = ref(db, `chats/${chatId}`);
      
      onValue(messagesRef, (snapshot) => {
        const messages = [];
        snapshot.forEach((child) => {
          messages.push(child.val());
        });
        
        messages.sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0));
        
        const container = document.getElementById('chatMessages');
        container.innerHTML = messages.map(msg => `
          <div class="message ${msg.senderId === currentUser.uid ? 'sent' : 'received'}">
            ${msg.text}
          </div>
        `).join('');
        
        container.scrollTop = container.scrollHeight;
      });
    }
  </script>
</body>
</html>
